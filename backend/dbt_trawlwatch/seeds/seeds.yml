version: 2

seeds:
  # Datastets natifs dans le projet
  - name: historical_dim_mmsi
    config:
      schema: seeds
      tags: ['dim', 'mmsi']
      quote_columns: true
      delimiter: ";"
      column_types:
        id: text
        mmsi: integer
        start_date: text
        end_date: text
        details: text
      
      description: >
        Table for historical MMSI - vessel_id association
      columns:
        - name: id
          description: Unique identifier for each vessel
          test:
            - not_null
        - name: mmsi
          description: Maritime Mobile Service Identity (MMSI)
          test:
            - not_null
            - unique
        - name: start_date
          description: Start date of the MMSI's operational period
          test:
            - not_null
        - name: end_date
          description: End date of the MMSI's operational period (if available)
        - name: details
          description: Context of MMSI termination.


  - name: historical_dim_vessels
    config:
      schema: seeds
      tags: ['dim','vessels']
      quote_columns: true
      delimiter: ";"
      column_types: 
        id: text
        ship_name: text
        loa: float
        country_iso3: text
        gear: text
        type: text
        imo: text
        ircs: text
        cfr: text
        main_engine_power: float
        auxiliary_engine_power: float
        tonnage_gt: text
        other_tonnage: float
        fish_hold_volume: float
        carrying_capacity: float
        external_marking: text
        start_date: text
        end_date: text
        status: text
        source: text

    description: >
      Historical table for vessels data
    columns:
      - name: id
        description: Unique identifier for each vessel (CFR or user-defined id)
        tests:
          - not_null
      - name: ship_name
        description: Name of the vessel
        tests:
          - not_null
      - name: loa
        description: Length overall (m).
      - name: country_iso3
        description: Flag of the ship, represented by the ISO3 code of the country
        tests:
          - not_null:
              config:
                severity: warn
      - name: gear
        description: Main engine
        tests:
          - not_null:
              config:
                severity: warn
      - name: type
        description: Fishing vessel type
      - name: imo
        description: IMO number of the vessel, used as a unique identifier.
      - name: cfr
        description: CFR number of the vessel (EU identifier).
      - name: ircs
        description: Call sign of the vessel, used for identification.
      - name: main_engine_power
        description: Main engine power (kW)
      - name: auxiliary_engine_power
        description: Power of the auxiliary engine(s) (kW)
      - name: tonnage_gt
        description: Gross tonnage (UMS for vessels with LOA > 24 m)
      - name: other_tonnage
        description: Other tonnage (UMS ?)
      - name: fish_hold_volume
        description: Maximal fish hold capacity (m3)
      - name: carrying_capacity
        description: Maximal catches capacity (t)
      - name: external_marking
        description: External marking written on the hull.
      - name: start_date
        description: Start date of the record operational period
        test:
          - not_null
      - name: end_date
        description: End date of the record operational period (if available)
      - name: status
        description: Vessel status (ACTIVE, OUT_OF_SERVICE, MIGHT_BE_OUT_OF_SERVICE, CHECK_FOR_NEW_MMSI)
        test:
          - not_null
          - accepted_values:
              values: ["ACTIVE", "OUT_OF_SERVICE", "MIGHT_BE_OUT_OF_SERVICE", "CHECK_FOR_NEW_MMSI"]
      - name: source
        description: Source of the vessel data & informations

  - name: ports
    config: 
      schema: seeds
      tags: ['dim','port']
      quote_columns: true
      delimiter: ";"
      column_types: 
        url: text
        country: text
        port: text
        locode: text
        latitude: float
        longitude: float
        geometry_point: text
    description: >
      Table RAW de dimension des ports avec coordonnées géographiques et informations complémentaires chargée à partir d'un CSV.
    columns:
      - name: url
        description: URL de la source des données.
        tests:
        - not_null
  
      - name: country
        description: Nom du pays du port.
        tests:
        - not_null
  
      - name: port
        description: Nom du port.
        tests:
        - not_null
  
      - name: locode
        description: Code de localisation du port (UN/LOCODE).
        tests:
        - not_null
  
      - name: latitude
        description: Latitude du port.
        tests:
        - not_null
  
      - name: longitude
        description: Longitude du port.
        tests:
        - not_null
  
      - name: geometry_point
        description: Représentation géométrique du port au format WKT.
        tests:
        - not_null

  - name: static_vessels_table
    config:
      schema: seeds
      tags: ['dim','vessel']
      quote_columns: true
      delimiter: ";"
      column_types: 
        id: text
        mmsi: integer
        ship_name: text
        length: float
        length_class: text
        country_iso3: text
        type: text
        imo: text
        cfr: text
        ircs: text
        external_marking: text
        tracking_activated: boolean
        tracking_status: text
        check: text
        details: text
        width: float
    description: >
      Table RAW de dimension des navires, incluant des informations d'identification,
      des caractéristiques physiques.
    columns:
      - name: id
        description: Identifiant unique du navire.
        tests:
          - not_null
      - name: mmsi
        description: Numéro d'identification maritime du navire.
        tests:
          - not_null
      - name: ship_name
        description: Nom du navire.
        tests:
          - not_null
      - name: length
        description: Longueur du navire en mètres.
        tests:
          - not_null
      - name: length_class
        description: Classe de longueur du navire.
      - name: country_iso3
        description: Code ISO3 du pays d'immatriculation du navire.
        tests:
          - not_null
      - name: type
        description: Type de navire.
      - name: imo
        description: Numéro IMO (International Maritime Organization) du navire.
      - name: cfr
        description: Code de registre des navires (CFR).
      - name: ircs
        description: Code international de radiocommunication des navires (IRCS).
      - name: external_marking
        description: Marquage externe du navire.
      - name: tracking_activated
        description: Indique si le suivi du navire est activé.
      - name: tracking_status
        description: Statut du suivi du navire.
      - name: check
        description: Vérification ou validation associée au navire.
      - name: details
        description: Détails supplémentaires sur le navire.
      - name: width
        description: Largeur du navire en mètres.

  # Datasets complémentaires
  - name: country_codes
    config:
      schema: utils
      tags: ['dim','country','ISO']
      quote_columns: true
      delimiter: ","
      