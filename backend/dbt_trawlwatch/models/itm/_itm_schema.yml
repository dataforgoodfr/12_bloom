version: 2

models:
    # DIMENSION MODELS
    - name: itm_dim_ports
      description: "Intermediate model for ports dimension, with Vorono√Ø buffers helping determine whether a vessel is or isn't in each port."
      columns:
        - name: port_id
          tests:
            - unique
            - not_null
        - name: port_geometry_buffer
          tests:
            - not_null
        - name: port_buffer_size_m
          tests:
            - not_null
    - name: itm_vessel_first_and_last_positions
      description: "Vessel first and last staged positions (not direct AIS messages)."
      columns:
        - name: vessel_id
          tests:
            - unique
            - not_null
    - name: itm_vessel_last_raw_position
      description: "Vessel last raw positions (direct AIS messages)."
      columns:
        - name: vessel_id
          tests:
            - unique
            - not_null

    # POSITIONS MODELS
    - name: itm_vessel_positions
      description: "Intermediate model for vessel positions."
    - name: itm_vessel_positions_x_zones
      description: "Intermediate model for vessel positions intersecting with zones."

    # EXCURSIONS MODELS
    - name: itm_vessel_excursions
      description: "Vessel excursions at sea between port leaving and port arrival. Only start and end informations, no metrics or intermediate positions."
    - name: itm_vessel_excursions_details
      description: "Detailed information about vessel excursions, including metrics and intermediate positions."
    - name: itm_zones_x_excursions_list
      description: "List of zones intersecting with excursions to help determine wich positions could be in a zone and reduce compute time."
    - name: itm_ports_calls
      description: "Port calls (between 2 excursions) with detailed information, including metrics and intermediate positions."

    # SEGMENTS MODELS
    - name: itm_vessel_segments
      description: "Vessel segments, which are the result of 2 consecutive positions during an excursion."
    - name: itm_vessel_segments_by_date
      description: "Vessel segments metrics by date, preparing marts for UI query between 2 dates."
    
